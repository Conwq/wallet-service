# wallet-service

  **WALLET-SERVICE** - это веб-приложение, разработанное на основе Spring Framework. В нем реализован следующий функционал: регистрация, авторизация, просмотр баланса, пополнение счета, снятие денег, просмотр истории транзакций текущего игрока, а также просмотр логов всех игроков (только для админа). Проект также включает в себя модульное тестирование с использованием JUnit5 (AssertJ, Mockito, Test-containers, MockMvc). Проект задокументирован с использованием Javadoc и Swagger.
 
  Для запуска приложения необходимо собрать модуль, отвечающий за логирование и аудит действий игрока в jar файл, и выполнить команду ***mvn spring-boot:run***, а так же запустите БД PostgreSQL в контейнере Docker, введя команду docker-compose up -d в корне проекта. При запуске приложения у вас уже будет создан администратор (username: admin, password: admin). Он имеет дополнительный функционал, доступный после авторизации: просмотр аудитов всех пользователей или аудит конкретного пользователя с указанием его "username".
  
  После первого запуска программы мы можем авторизоваться только под ролью "admin". Если нужна роль "user", необходимо пройти регистрацию и затем авторизироваться под данными, которые были использованы при регистрации.
  
  Добавлен кастомный стартер, который отвечает за логирование в бд и аудит действий игрока. 

  Для осуществления операций, доступных для авторизированных пользователей, HTTP запросы нужно осуществлять с использованием Header "Authorization" - токен, полученный после успешной авторизации, именно он проверяет роль пользователя и его статус.
  
  После успешной авторизации у вас будет доступ к частям приложения для авторизованного пользователя: баланс, кредит, дебет, просмотр истории транзакций и выход из учетной записи. Если вы вошли как администратор, дополнительно отображаются опции просмотра логов всех игроков или логов конкретного пользователя. Логи содержат дату создания, имя пользователя, номер транзакции, выполняемую операцию и оставшуюся сумму на счету после совершения операции. Можно переключаться между аккаунтами игроков.

  При операциях Credit / Debit необходим ввод суммы и токен транзакции. В случае, если токен транзакции не уникален, то транзакция не будет завершена, а так же если сумма снятия средст больше суммы средства на счета, то транзакция так же не будет завершена.

  Обработка ошибок происходит с помощью ExceptionHandler. Swagger доступен по адресу **http://localhost:8080/swagger-ui/index.html**

    В данной версии проекта применялись следующие технологии:
    -- Java 17
    -- Spring Boot 3.2.0
    -- Spring Data JPA
    -- Spring AOP
    -- Spring Security
    -- SLF4J
    -- AspectJ
    -- REST API
    -- JSON
    -- MapStruct
    -- Lombok
    -- PostgreSQL
    -- Liquibase
    -- JWT token
    -- JUnit5, Mockito, AssertJ, Testcontainers, MockMvc
    -- Swagger + Swagger UI